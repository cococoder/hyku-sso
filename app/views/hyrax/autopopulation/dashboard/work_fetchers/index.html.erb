
<% content_for(:page_title) { "Work Autopopulation" } %>

<% provide :page_header do %>
  <h1><span class="fa fa-arrow-circle-down" aria-hidden="true"></span> <%= t("hyrax.autopopulation.page_header") %></h1>

  <div class="pull-right">
    <%= link_to hyrax_autopopulation.fetch_with_doi_work_fetchers_path, method: :post, class: "btn btn-primary" do %>
      <span class="fa fa-edit" aria-hidden="true"></span> <%= t("hyrax.autopopulation.scan.unpaywall") %>
    <% end %>
 
    <%= link_to hyrax_autopopulation.fetch_with_orcid_work_fetchers_path, method: :post, class: "btn btn-primary" do %>
      <span class="fa fa-edit" aria-hidden="true"></span> <%= t("hyrax.autopopulation.scan.orcid") %>
    <% end %>
   </div>
<% end %>
  
<div class="row">
  <div class="col-md-12">
    <div class="panel panel-default tabs">
      <ul class="nav nav-tabs" role="tablist">
        <li>
          <a href="#autopopulation-settings" role="tab" data-toggle="tab"><%= t("hyrax.autopopulation.tabs.settings") %></a>
        </li>
        <li class="active">
          <a href="#draft-import" role="tab" data-toggle="tab"><%= t("hyrax.autopopulation.tabs.draft") %></a>
        </li>
        <li>
          <a href="#approved-import" role="tab" data-toggle="tab"><%= t("hyrax.autopopulation.tabs.approved") %></a>
        </li> 
      </ul>

      <div class="tab-content">
        <div id="draft-import" class="tab-pane active">
          <div class="panel panel-default labels">
            <div class="panel-body">
              <%= form_tag hyrax_autopopulation.approve_all_work_fetchers_path, method: :put do  %>
                <% if @draft_works.present? %> 
                  <%= submit_tag "Approve All", class: "btn btn-primary pull-right" %>  &nbsp;&nbsp;
                <% end %>
              <% end %>

              <div class="table-responsive">
                <%= form_tag hyrax_autopopulation.approve_multiple_work_fetchers_path, method: :put do  %>
                  <%= render "index_table", works: @draft_works %>
                  <% if @draft_works.present? %> 
                    <%= submit_tag "Approve Selected", class: "btn btn-primary pull-right" %>
                  <% end %>
                <% end %>
            </div> 
          </div>
        </div>
      </div> <!-- closes .tab-content -->

      <div id="approved-import" class="tab-pane">
        <div class="panel panel-default labels">
          <div class="panel-body">
            <%= render "index_table", works: @approved_works %>
            <div>
          </div>
        </div>
      </div>
      
    </div> 
          
      <div id="autopopulation-settings" class="tab-pane">
        <div class="panel panel-default labels">
          <div class="panel-body">
            <div class="table-responsive">
              <%= render "settings_form", account: @account %>
            </div>
          <div>
        </div>
      </div>

      </div>
     </div>
    </div>
    </div> <!-- .panel-default tabs -->
  </div>
</div>
  